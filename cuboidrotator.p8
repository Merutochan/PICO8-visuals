pico-8 cartridge // http://www.pico-8.com
version 19
__lua__
p1=0
dx=0
f1=1.7
sl=0.3
n=1
sb=32
back=true
f3=1
f2=1
function _update60()
	
	size= sb + 8*sin(time()/10)
	c=(time()*f1+8)
	cx=16*sin(time()/5)
	
	if btnp(1) then n+=1 end
	if btnp(0) then n-=1 end
	if btn(2) then f2+=0.01 f1+=0.01 end
	if btn(3) then f2-=0.01 f1-=0.01 end
	
	if btnp(4) then back=not back end
	n= max(0,n)
end

function _draw()
	cls()
	
	-- background
	if back then
		for a=-1,15 do
			for b=-1,15 do
				pal(10,(a+b+time()*4)%14+1)
				ax=(8*a+time()*10)%136-8
				ay=(8*b+time()*20)%136-8
				spr((time()*8+a*f3+b*f2)%10,ax,ay)
				pal(10,10)	
			end
		end
	end

	-- rotator
	
	-- draw many of them
	for k=0,n-1 do
	
	-- calculate edge position
	p1=(f1*size*time()+k)%size


	-- absolute position of cuboid
	cy = (128/(n+1))*k + (128/(n+1))/2
	cx += 8*sin(2*k/n+time())
	
	-- now
	-- draw many horizontal lines
	-- to simulate a cuboid
	
	for y=0,size do
	
		-- now calculate dx
		-- which is the amount of 
		-- horizontal shift in the
		-- size of the line
		-- to obtain the perspective
		-- effect
		
		-- we want the dx amount to be
		-- dependent on p1 (edge pos.)
		if (y<p1) then
			dx=y-p1
		else 
			dx=p1-y
		end 
		
		-- the trick is now all here!
		-- modify to obtain the effect
		
		-- sl amplifies/attenuates
		-- the sin depends on the 
		-- position of the edge. 

		-- as the edge moves the sin
		-- grows and decays so that
		-- our "triangle" changes 
		-- heigth "synced" to the 
		-- edge position
		
		dx = dx*(sin(p1/(size*2)))*sl
					
		if y==0 then
			line(cx+32+dx,cy+y-1,cx+96-dx,cy+y-1,7)
		elseif y==flr(size) then
			line(cx+32+dx,cy+y+1,cx+96-dx,cy+y+1,7)
		end

		if y>p1 then
			line(-1+cx+32+dx,cy+y,cx+96-dx+1,cy+y,7)
			line(cx+32+dx,cy+y,cx+96-dx,cy+y,c+k)
		elseif y==flr(p1) then
			line(-1+cx+32+dx,cy+y,cx+96-dx+1,cy+y,7)
		else
			line(-1+cx+32+dx,cy+y,cx+96-dx+1,cy+y,7)
			line(cx+32+dx,cy+y,cx+96-dx,cy+y,c+k+1)
		end
	end
	end
end



__gfx__
000000000000000000000000000aa000000aa000000aa000000aa000000aa0000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000aa00000a00a0000a00a0000a00a0000a00a0000a00a00000aa00000000000000000000000000000000000000000000000000000000000
000000000000000000a00a000a0000a00a0000a00a0aa0a00a0000a00a0000a000a00a0000000000000000000000000000000000000000000000000000000000
00000000000aa0000a0000a0a000000aa00aa00aa0aaaa0aa00aa00aa000000a0a0000a0000aa000000000000000000000000000000000000000000000000000
00000000000aa0000a0000a0a000000aa00aa00aa0aaaa0aa00aa00aa000000a0a0000a0000aa000000000000000000000000000000000000000000000000000
000000000000000000a00a000a0000a00a0000a00a0aa0a00a0000a00a0000a000a00a0000000000000000000000000000000000000000000000000000000000
0000000000000000000aa00000a00a0000a00a0000a00a0000a00a0000a00a00000aa00000000000000000000000000000000000000000000000000000000000
000000000000000000000000000aa000000aa000000aa000000aa000000aa0000000000000000000000000000000000000000000000000000000000000000000
__label__
00d00000000000000000000000000003003000400004005000050060660600700007000000000000000000070070008000080090000900a0aa0a00b0000b00c0
dd0000000000000000000000000000003300000400400005005000060060000700700000000000000000000077000008008000090090000a00a0000b00b0000c
0000000000000000000000000000000000000000440000005500000066000000770000000000000000000000000000008800000099000000aa000000bb000000
00000000000000000000000000000000440000005500000066000000770000008800000000000000000000008800000099000000aa000000bb000000cc000000
0000000000000000000000003300000400400005005000060060000700700008008000000000000077000008008000090090000a00a0000b00b0000c00c00000
000000000000000000000003003000400004005000050060660600700007008000080000000000070070008000080090000900a0aa0a00b0000b00c0000c000d
ee000000000000002200003000030400000045005500560666606700770078000000800066000070000708000000890099009a0aaaa0ab00bb00bc000000c0d0
ee000000000000002200003000030400000045005500560666606700770078000000800066000070000708000000890099009a0aaaa0ab00bb00bc000000c0d0
000000000000000000000003003000400004005000050060660600700007008000080000000000070070008000080090000900a0aa0a00b0000b00c0000c000d
0000000000000000000000003300000400400005005000060060000700700008008000000000000077000008008000090090000a00a0000b00b0000c00c00000
00000000000000000000000000000000440000005500000066000000770000008800000000000000000000008800000099000000aa000000bb000000cc000000
000000000000000000000000440000005500000066000000770000008800000000000000000000008800000099000000aa000000bb000000cc00000000000000
00000000000000003300000400400005005000060060000700700008008000009900000077000008008000090090000a00a0000b00b0000c00c00000dd000000
0000000000000003003000400004005000050060660600700007008000080009009000070070008000080090000900a0aa0a00b0000b00c0000c000d00d00000
000000002200003000030400000045005500560666606700770078000000809000090070000708000000890099009a0aaaa0ab00bb00bc000000c0d0000d0000
000000002200003000030400000045005500560666606700770078000000809000090070000708000000890099009a0aaaa0ab00bb00bc000000c0d0000d0000
0000000000000003003000400004005000050060660600700007008000080009009000070070008000080090000900a0aa0a00b0000b00c0000c000d00d00000
00000000000000003300000400400005005000060060000700700008008000009900000077000008008000090090000a00a0000b00b0000c00c00000dd000000
000000000000000000000000440000005500000066000000770000008800000000000000000000008800000099000000aa000000bb000000cc00000000000000
dd000000ee0000001100000022000000000000000000000000000000000000000000000055000000660000000000000000000000000000000000000000000000
00d0000e00e0000100100002002000003300000000000000000000000000000077000005005000060060000077000000000000000000000000000000bb00000c
000d00e0ee0e00100001002000020003003000000000000000000000000000070070005000050060000600070070000000000000000000000000000b00b000c0
dd00de0eeee0e100110012000000203000030000440000000000000066000070000705005500560000006070000700008800000000000000aa0000b0000b0c00
dd00de0eeee0e100110012000000203000030000440000000000000066000070000705005500560000006070000700008800000000000000aa0000b0000b0c00
000d00e0ee0e00100001002000020003003000000000000000000000000000070070005000050060000600070070000000000000000000000000000b00b000c0
00d0000e00e0000100100002002000003300000000000000000000000000000077000005005000060060000077000000000000000000000000000000bb00000c
dd000000ee0000001100000022000000000000000000000000000000000000000000000055000000660000000000000000000000000000000000000000000000
ee0000001100000022000000000000000000000000000000000000000000000088000000660000000000000000000000000000000000000000000000cc000000
00e0000100100002002000003300000000000000000000000000000077000008008000060060000077000000000000000000000000000000bb00000c00c0000d
ee0e00100001002000020003003000000000000000000000000000070070008000080060000600070070000000000000000000000000000b00b000c0000c00d0
eee0e100110012000000203000030000440000000000000066000070000708000000860000006070000700008800000000000000aa0000b0000b0c000000cd00
eee0e100110012000000203000030000440000000000000066000070077777777777777777777777777777777777777777777777777770b0000b0c000000cd00
ee0e00100001002000020003003000000000000000000000000000077777777777777777777777777777777777777777777777777777770b00b000c0000c00d0
00e0000100100002002000003300000000000000000000000000000777777777777777777777777777777777777777777777777777777700bb00000c00c0000d
ee0000001100000022000000000000000000000000000000000000077777777777777777777777777777777777777777777777777777777000000000cc000000
1100000022000000000000000000000000000000000000000000000777777777777777777777777777777777777777777777777777777770cc000000dd000000
001000020020000033000000000000000000000000000000770000777777777777777777777777777777777777777777777777777777777c00c0000d00d0000e
0001002000020003003000000000000000000000000000070070007777777777777777777777777777777777777777777777777777777770000c00d0000d00e0
11001200000020300003000044000000000000006600007000070877777777777777777777777777777777777777777777777777777777770000cd00dd00de0e
11001200000020300003000044000000000000006600007000070877777777777777777777777777777777777777777777777777777777770000cd00dd00de0e
0001002000020003003000000000000000000000000000070070077777777777777777777777777777777777777777777777777777777777000c00d0000d00e0
001000020020000033000000000000000000000000000000770007777777777777777777777777777777777777777777777777777777777770c0000d00d0000e
11000000220000000000000000000000000000000000000000000777777777777777777777777777777777777777777777777777777777777c000000dd000000
22000000000000000000000000000000000000000000000088007777777777777777777777777777777777777777777777777777777777777d000000ee000000
002000003300000000000000000000000000000077000008008077777777777777777777777777777777777777777777777777777777777777d0000e00e00001
0002000300300000000000000000000000000007007000800008777777777777777777777777777777777777777777777777777777777777770d00e0ee0e0010
00002030000300004400000000000000660000700007080000007777777777777777777777777777777777777777777777777777777777777700de0eeee0e100
00002030000300004400000000000000660000700007080000077777777777777777777777777777777777777777777777777777777777777700de0eeee0e100
0002000300300000000000000000000000000007007000800007777777777777777777777777777777777777777777777777777777777777777d00e0ee0e0010
00200000330000000000000000000000000000007700000800877777777777777777777777777777777777777777777777777777777777777770000e00e00001
220000000000000000000000000000000000000000000000887777777777777777777777777777777777777777777777777777777777777777700000ee000000
00000000000000000000000000000000000000008800000099777777777777777777777777777777777777777777777777777777777777777777000011000000
33000000000000000000000000000000770000080080000900777777777777777777777777777777777777777777777777777777777777777777000100100002
00300000000000000000000000000007007000800008009007777777777777777777777777777777777777777777777777777777777777777777001000010020
00030000440000000000000066000070000708000000890097666666666666666666666666666666666666666666666666666666666666666667e10011001200
00030000440000000000000066000070000708000000890099766666666666666666666666666666666666666666666666666666666666666667e10011001200
00300000000000000000000000000007007000800008009000766666666666666666666666666666666666666666666666666666666666666667001000010020
33000000000000000000000000000000770000080080000900766666666666666666666666666666666666666666666666666666666666666670000100100002
00000000000000000000000000000000000000008800000099076666666666666666666666666666666666666666666666666666666666666670000011000000
000000000000000000000000000000008800000099000000aa076666666666666666666666666666666666666666666666666666666666666670000022000000
00000000000000000000000077000008008000090090000a00a76666666666666666666666666666666666666666666666666666666666666710000200200000
0000000000000000000000070070008000080090000900a0aa0a7666666666666666666666666666666666666666666666666666666666666701002000020003
440000000000000066000070000708000000890099009a0aaaa07666666666666666666666666666666666666666666666666666666666666700120000002030
440000000000000066000070000708000000890099009a0aaaa07666666666666666666666666666666666666666666666666666666666666700120000002030
0000000000000000000000070070008000080090000900a0aa0a7666666666666666666666666666666666666666666666666666666666667001002000020003
00000000000000000000000077000008008000090090000a00a00766666666666666666666666666666666666666666666666666666666667010000200200000
000000000000000000000000000000008800000099000000aa000766666666666666666666666666666666666666666666666666666666667100000022000000
0000000000000000000000008800000099000000aa000000bb000766666666666666666666666666666666666666666666666666666666672200000000000000
000000000000000077000008008000090090000a00a0000b00b00076666666666666666666666666666666666666666666666666666666670020000033000000
00000000000000070070008000080090000900a0aa0a00b0000b0076666666666666666666666666666666666666666666666666666666670002000300300000
0000000066000070000708000000890099009a0aaaa0ab00bb00bc76666666666666666666666666666666666666666666666666666666700000203000030000
0000000066000070000708000000890099009a0aaaa0ab00bb00bc07777777777777777777777777777777777777777777777777777777000000203000030000
00000000000000070070008000080090000900a0aa0a00b0000b00c0000c000d00d0000b00b000c0000c00d0000d00e0ee0e0010000100200002000300300000
000000000000000077000008008000090090000a00a0000b00b0000c00c00000dd000000bb00000c00c0000d00d0000e00e00001001000020020000033000000
0000000000000000000000008800000099000000aa000000bb000000cc0000000000000000000000cc000000dd000000ee000000110000002200000000000000
00000000000000008800000099000000aa000000bb000000cc0000000000000000000000cc000000dd000000ee00000011000000220000000000000000000000
0000000077000008008000090090000a00a0000b00b0000c00c00000dd0000000000000c00c0000d00d0000e00e0000100100002002000003300000000000000
000000070070008000080090000900a0aa0a00b0000b00c0000c000d00d00000000000c0000c00d0000d00e0ee0e001000010020000200030030000000000000
66000070000708000000890099009a0aaaa0ab00bb00bc000000c0d0000d0000ee000c000000cd00dd00de0eeee0e10011001200000020300003000044000000
66000070000708000000890099009a0aaaa0ab00bb00bc000000c0d0000d0000ee000c000000cd00dd00de0eeee0e10011001200000020300003000044000000
000000070070008000080090000900a0aa0a00b0000b00c0000c000d00d00000000000c0000c00d0000d00e0ee0e001000010020000200030030000000000000
0000000077000008008000090090000a00a0000b00b0000c00c00000dd0000000000000c00c0000d00d0000e00e0000100100002002000003300000000000000
00000000000000008800000099000000aa000000bb000000cc0000000000000000000000cc000000dd000000ee00000011000000220000000000000000000000
000000008800000099000000aa000000bb000000cc000000000000000000000000000000dd000000ee0000001100000022000000000000000000000000000000
77000008008000090090000a00a0000b00b0000c00c00000dd000000000000000000000d00d0000e00e000010010000200200000330000000000000000000000
0070008000080090000900a0aa0a00b0000b00c0000c000d00d0000000000000000000d0000d00e0ee0e00100001002000020003003000000000000000000000
000708000000890099009a0aaaa0ab00bb00bc000000c0d0000d0000ee00000000000d00dd00de0eeee0e1001100120000002030000300004400000000000000
000708000000890099009a0aaaa0ab00bb00bc000000c0d0000d0000ee00000000000d00dd00de0eeee0e1001100120000002030000300004400000000000000
0070008000080090000900a0aa0a00b0000b00c0000c000d00d0000000000000000000d0000d00e0ee0e00100001002000020003003000000000000000000000
77000008008000090090000a00a0000b00b0000c00c00000dd000000000000000000000d00d0000e00e000010010000200200000330000000000000000000000
000000008800000099000000aa000000bb000000cc000000000000000000000000000000dd000000ee0000001100000022000000000000000000000000000000
8800000099000000aa000000bb000000cc00000000000000000000000000000000000000ee000000110000002200000000000000000000000000000000000000
008000090090000a00a0000b00b0000c00c00000dd00000000000000000000000000000e00e00001001000020020000033000000000000000000000000000000
00080090000900a0aa0a00b0000b00c0000c000d00d000000000000000000000000000e0ee0e0010000100200002000300300000000000000000000000000007
0000890099009a0aaaa0ab00bb00bc000000c0d0000d0000ee0000000000000022000e0eeee0e100110012000000203000030000440000000000000066000070
0000890099009a0aaaa0ab00bb00bc000000c0d0000d0000ee0000000000000022000e0eeee0e100110012000000203000030000440000000000000066000070
00080090000900a0aa0a00b0000b00c0000c000d00d000000000000000000000000000e0ee0e0010000100200002000300300000000000000000000000000007
008000090090000a00a0000b00b0000c00c00000dd00000000000000000000000000000e00e00001001000020020000033000000000000000000000000000000
8800000099000000aa000000bb000000cc00000000000000000000000000000000000000ee000000110000002200000000000000000000000000000000000000
99000000aa000000bb000000cc000000000000000000000000000000000000000000000011000000220000000000000000000000000000000000000000000000
0090000a00a0000b00b0000c00c00000dd0000000000000000000000000000003300000100100002002000003300000000000000000000000000000077000008
000900a0aa0a00b0000b00c0000c000d00d000000000000000000000000000030030001000010020000200030030000000000000000000000000000700700080
99009a0aaaa0ab00bb00bc000000c0d0000d0000ee00000000000000220000300003010011001200000020300003000044000000000000006600007000070800
99009a0aaaa0ab00bb00bc000000c0d0000d0000ee00000000000000220000300003010011001200000020300003000044000000000000006600007000070800
000900a0aa0a00b0000b00c0000c000d00d000000000000000000000000000030030001000010020000200030030000000000000000000000000000700700080
0090000a00a0000b00b0000c00c00000dd0000000000000000000000000000003300000100100002002000003300000000000000000000000000000077000008
99000000aa000000bb000000cc000000000000000000000000000000000000000000000011000000220000000000000000000000000000000000000000000000
aa000000bb000000cc00000000000000000000000000000000000000000000004400000022000000000000000000000000000000000000000000000088000000
00a0000b00b0000c00c00000dd000000000000000000000000000000330000040040000200200000330000000000000000000000000000007700000800800009
aa0a00b0000b00c0000c000d00d00000000000000000000000000003003000400004002000020003003000000000000000000000000000070070008000080090
aaa0ab00bb00bc000000c0d0000d0000ee0000000000000022000030000304000000420000002030000300004400000000000000660000700007080000008900
aaa0ab00bb00bc000000c0d0000d0000ee0000000000000022000030000304000000420000002030000300004400000000000000660000700007080000008900
aa0a00b0000b00c0000c000d00d00000000000000000000000000003003000400004002000020003003000000000000000000000000000070070008000080090
00a0000b00b0000c00c00000dd000000000000000000000000000000330000040040000200200000330000000000000000000000000000007700000800800009
aa000000bb000000cc00000000000000000000000000000000000000000000004400000022000000000000000000000000000000000000000000000088000000
bb000000cc0000000000000000000000000000000000000000000000440000005500000000000000000000000000000000000000000000008800000099000000
00b0000c00c00000dd0000000000000000000000000000003300000400400005005000003300000000000000000000000000000077000008008000090090000a
000b00c0000c000d00d00000000000000000000000000003003000400004005000050003003000000000000000000000000000070070008000080090000900a0
bb00bc000000c0d0000d0000ee000000000000002200003000030400000045005500503000030000440000000000000066000070000708000000890099009a0a
bb00bc000000c0d0000d0000ee000000000000002200003000030400000045005500503000030000440000000000000066000070000708000000890099009a0a
000b00c0000c000d00d00000000000000000000000000003003000400004005000050003003000000000000000000000000000070070008000080090000900a0
00b0000c00c00000dd0000000000000000000000000000003300000400400005005000003300000000000000000000000000000077000008008000090090000a
bb000000cc0000000000000000000000000000000000000000000000440000005500000000000000000000000000000000000000000000008800000099000000
cc0000000000000000000000000000000000000000000000440000005500000066000000000000000000000000000000000000008800000099000000aa000000
00c00000dd0000000000000000000000000000003300000400400005005000060060000000000000000000000000000077000008008000090090000a00a0000b
000c000d00d00000000000000000000000000003003000400004005000050060660600000000000000000000000000070070008000080090000900a0aa0a00b0
0000c0d0000d0000ee000000000000002200003000030400000045005500560666606000440000000000000066000070000708000000890099009a0aaaa0ab00
0000c0d0000d0000ee000000000000002200003000030400000045005500560666606000440000000000000066000070000708000000890099009a0aaaa0ab00

