pico-8 cartridge // http://www.pico-8.com
version 19
__lua__
f1=2
f2=1
lst={'f1','f2','c','pat','multic'}
lpos=1
c=14
lt=-1
pat=1
multic=false
pats = {'circ','diag','horiz','vert'}

function _update60()
	q=8 + 4*sin(time()/5)
	qq=8 + 4*sin(time()/5+.5)
	f2 = 2 + 4*abs(sin(time()/20))
	
	if btnp(1) then lpos+=1 lt=time() end
	if btnp(0) then lpos-=1 lt=time() end
	lpos= max(min(lpos,#lst),1)
	
	if lpos==1 then -- f1
		if btn(2) then f1+=0.01 end
		if btn(3) then f1-=0.01 end
	elseif lpos==2 then -- f2
		if btn(2) then f2+=0.01 end
		if btn(3) then f2-=0.01 end	
	elseif lpos==3 then -- c
		if btnp(2) then c+=1 end
		if btnp(3) then c-=1 end
		c=c%16
	elseif lpos==4 then -- pat
		if btnp(2) then pat+=1 end
		if btnp(3) then pat-=1 end
		pat=max(min(pat,#pats),1)
	elseif lpos==5 then -- multic
		if btnp(2) then multic=true end
		if btnp(3) then multic=false end
	end
end

function _draw()
	cls()
	pal(14,c)
	for i=0,16 do
		for j=0,16 do
			if multic then
				pal(14,c+((i-8)/8)+((j-8)/8))
			end
			x=(4+i*8)%136-8
			y=(4+j*8)%136-8
			if pat==1 then
				spr((((i-8)/f1)*((i-8)/f1)+((j-8)/f2)*((j-8)/f2)-time()*10)%9,x,y)
			elseif pat==2 then
				spr((i/f1+j/f2-time()*10)%9,x,y)
			elseif pat==3 then
				spr((i/f1-time()*10)%9,x,y)
			elseif pat==4 then
				spr((j/f2-time()*10)%9,x,y)
			end
		end
	end
	pal(14,14)
	
	
	circfill(64+24*sin(time()/13+0.5),64+32*cos(time()/7+0.5),qq/2,0)
	circfill(64+24*sin(time()/13),64+32*cos(time()/7),q+2,0)
	for i=-20,20 do
		for j=-20,20 do
			if (i*i+j*j<q*q) then
				byte = peek(40+(flr(16/q*i/2)+flr(time()*20))%8+((flr(16/q*j)+flr(time()*20))%16)*64)
				if i%2==1 then byte=byte/16 end
--			 if byte!=0 then byte+=(flr(time()*10)+(i/8)) end
				pset(64+i+24*sin(time()/13),64+j+32*cos(time()/7),byte)
			end
		end
	end

	if time()-lt<0.1 then
		print(lst[lpos],0,0,7)
	end
end
__gfx__
e0000000e0000000e0000000e0000000eefefefee0000000e0000000e00000000000000000000000028eeeee0567777700000000000000000000000000000000
e0000000e0000000e0000000e0efefe0efefefefe0efefe0e0000000e00000000000000000000000028eeeee0567777700000000000000000000000000000000
e0000000e0000000e00efe00e0fefef0eefefefee0fefef0e00efe00e00000000000000000000000028eeeee0567777700000000000000000000000000000000
e0000000e000f000e00fef00e0efefe0efefefefe0efefe0e00fef00e000f0000000000000000000028eeeee0567777700000000000000000000000000000000
e0000000e0000000e00efe00e0fefef0eefefefee0fefef0e00efe00e00000000000000000000000028eeeee0567777700000000000000000000000000000000
e0000000e0000000e0000000e0efefe0efefefefe0efefe0e0000000e00000000000000000000000028888880566666600000000000000000000000000000000
e0000000e0000000e0000000e0000000eefefefee0000000e0000000e00000000000000000000000022222220555555500000000000000000000000000000000
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000005677777028eeeee00000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000005677777028eeeee00000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000005677777028eeeee00000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000005677777028eeeee00000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000005677777028eeeee00000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000056666660288888800000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000055555550222222200000000000000000000000000000000
__label__
f0000000f0000000000000f0f0f000f0f0f00000f00000000000000000000000000000000000000000000000f00000f0f0f000f0f0f0000000000000f0000000
00000000000000000000000f0f00000f0f0000000000000000000000000000000000000000000000000000000000000f0f00000f0f0000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0f000000000000000000000f0f00000f0f0000000000000000000000000000000000000000000000000000000000000f0f00000f0f000000000000000000000f
f0f0000000000000000000f0f0f000f0f0f00000000000000000000000000000000000000000000000000000000000f0f0f000f0f0f0000000000000000000f0
0f000000f0000000f000000f0f00000f0f000000f00000000000000000000000000000000000000000000000f000000f0f00000f0f000000f0000000f000000f
f0f0000000000000000000f0f0f000f0f0f00000000000000000000000000000000000000000000000000000000000f0f0f000f0f0f0000000000000000000f0
0f000000000000000000000f0f00000f0f0000000000000000000000000000000000000000000000000000000000000f0f00000f0f000000000000000000000f
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f000000000000000000000
0f0000000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f0000000000000000000f
f0f0000000000000000000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f0000000000000000000f0
0f000000f0000000f0000f0f0f0f000f0f000000f00000000000000000000000000000000000000000000000f000000f0f000f0f0f0f0000f0000000f000000f
f0f0000000000000000000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f0000000000000000000f0
0f0000000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f0000000000000000000f
0000000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f0f0000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0000000000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f00000000000000000f0f
f0f0000000000000000000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f0000000000000000000f0
0f0f0000f0000000f0000f0f0f0f000f0f0000000000000000000000f0000000f0000000f0000000000000000000000f0f000f0f0f0f0000f0000000f0000f0f
f0f0000000000000000000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f0000000000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f00000000000000000f0f
f0f0000000000000000000f0f0f00000000000000000000000000000000000000000000000000000000eee0507000000000000f0f0f0000000000000000000f0
00000000000000000000000000000000000000000000000000000000000000000000000000000000888888050666600000000000000000000000000000000000
f0f0000000000000000000f0f0f000000000000000000000000000000000000000000000000002088888880506666666000000f0f0f0000000000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000005202222222050555555500000f0f0f0f00000000000000000f0f
f0f0000000000000f00000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000000000f0f0f00000f0000000000000f0
0f0f00000000000f0f000f0f0f0f000f0f0000000000000000000000f0000000f00000000eeee507677777020e8eeeee0507000f0f0f000f0f00000000000f0f
f0f0000000000000f00000f0f0f00000f000000000000000000000000000000000000000eeeee507677777020e8eeeee05076000f0f00000f0000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000eeeeee507677777020e8eeeee050767000f0f00000000000000000f0f
f0f0000000000000000000f0f0f00000000000000000000000000000000000000000000eeeeee507677777020e8eeeee0507670000f0000000000000000000f0
00000000000000000000000000000000000000000000000000000000000000000000008eeeeee507677777020e8eeeee05076770000000000000000000000000
f0f0000000000000000000f0f0f00000000000000000000000000000000000000000028eeeeee507677777020e8eeeee0507677700f0000000000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000028888888506666666020888888805066666000f00000000000000000f0f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000000002222222250555555502022222220505555500000000f0000000000000f0
0f0f00000000000f0f000f0f0f0f0000f00000000000000000000000f0000000f000000000000000000000000000000000000000000f000f0f00000000000f0f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000f0000000000000f0
0f0f00000000000000000f0f0f0f000000000000000000000000000000000000000005677777720e8eeeee0507677777020e8eeee00000000000000000000f0f
f0f0000000000000000000f0f0f0000000000000000000000000000000000000000505677777720e8eeeee0507677777020e8eeeee00000000000000000000f0
0000000000000000000000000000000000000000000000000000000000000000000505677777720e8eeeee0507677777020e8eeeee0000000000000000000000
f0f0000000000000000000000000000000000000000000000000000000000000000505677777720e8eeeee0507677777020e8eeeee00000000000000000000f0
0f0f0000000000000000000f0f00000000000000000000000000000000000000000505677777720e8eeeee0507677777020e8eeeee0000000000000000000f0f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f00505677777720e8eeeee0507677777020e8eeeee000000f0000000000000f0
0f0f00000000000f0f00000f0f000000f000000000000000f0000000f000000f00050566666662088888880506666666020888888800000f0f00000000000f0f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f00505555555520222222205055555550202222222000000f0000000000000f0
0f0f0000000000000000000f0f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f0f
f0f00000000000000000000000000000000000000000000000000000000000000000028eeeeee507677777020e8eeeee050767777000000000000000000000f0
00000000000000000000000000000000000000000000000000000000000000000000028eeeeee507677777020e8eeeee05076777700000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000028eeeeee507677777020e8eeeee05076777000000000000000000000000
0f000000000000000000000f0f000000000000000000000000000000000000000000028eeeeee507677777020e8eeeee0507677700000000000000000000000f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f000028eeeeee507677777020e8eeeee0507677700f00000f0000000000000f0
0f0000000000000f0f00000f0f000000f000000000000000f0000000f000000f0f00008eeeeee507677777020e8eeeee050767700f00000f0f0000000000000f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f00000088888850666666602088888880506660000f00000f0000000000000f0
0f000000000000000000000f0f0000000000000000000000000000000000000000000008888885066666660208888888050666000f000000000000000000000f
00000000000000000000000000000000000000000000000000000000000000000000000022222505555555020222222205055000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000077720e8eeeee050767777702000000000000000000000000000000
0f000000000000000000000f0f00000000000000000000000000000000000000000000000000720e8eeeee05076777770000000f0f000000000000000000000f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f00000000000020e8eeeee0507677777000000f0f0f00000f0000000000000f0
0f0000000000000f0f00000f0f000000f000000000000000f0000000f000000f0f000000f00000008eeeee05076770000000000f0f00000f0f0000000000000f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f000000000000000000eee0507000000000000f0f0f00000f0000000000000f0
0f000000000000000000000f0f00000000000000000000000000000000000000000000000000000000000000000000000000000f0f000000000000000000000f
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0f000000000000000000000f0f00000000000000000000000000000000000000000000000000000000000000000000000000000f0f000000000000000000000f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f0000000000000000000000000000000000000f0f0f00000f0000000000000f0
0f0000000000000f0f00000f0f000000f000000000000000f0000000f000000f0f000000f0000000f000000000000000f000000f0f00000f0f0000000000000f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f0000000000000000000000000000000000000f0f0f00000f0000000000000f0
0f000000000000000000000f0f00000000000000000000000000000000000000000000000000000000000000000000000000000f0f000000000000000000000f
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f0f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f0
0f0f0000000000000000000f0f00000000000000000000000000000000000000000000000000000000000000000000000000000f0f0000000000000000000f0f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f0000000000000000000000000000000000000f0f0f00000f0000000000000f0
0f0f00000000000f0f00000f0f000000f000000000000000f0000000f000000f0f000000f0000000f000000000000000f000000f0f00000f0f00000000000f0f
f0f0000000000000f00000f0f0f0000000000000000000000000000000000000f0000000000000000000000000000000000000f0f0f00000f0000000000000f0
0f0f0000000000000000000f0f00000000000000000000000000000000000000000000000000000000000000000000000000000f0f0000000000000000000f0f
f0f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f0
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f0f0000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0000000000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f00000000000000000f0f
f0f0000000000000f00000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f00000f0000000000000f0
0f0f00000000000f0f000f0f0f0f0000f00000000000000000000000f0000000f0000000f00000000000000000000000f0000f0f0f0f000f0f00000000000f0f
f0f0000000000000f00000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f00000f0000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f00000000000000000f0f
f0f0000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0000000000000000000f0
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f0f0000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0000000000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f00000000000000000f0f
f0f0000000000000f00000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f00000f0000000000000f0
0f0f00000000000f0f000f0f0f0f000f0f0000000000000000000000f0000000f0000000f0000000000000000000000f0f000f0f0f0f000f0f00000000000f0f
f0f0000000000000f00000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f00000f0000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f00000000000000000f0f
f0f0000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0000000000000000000f0
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f0f0000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0000000000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f00000000000000000f0f
f0f0000000000000000000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f0000000000000000000f0
0f0f0000f0000000f0000f0f0f0f000f0f0000000000000000000000f0000000f0000000f0000000000000000000000f0f000f0f0f0f0000f0000000f0000f0f
f0f0000000000000000000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f0000000000000000000f0
0f0f00000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f00000000000000000f0f
f0f0000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0000000000000000000f0
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f000000000000000000000
0f0000000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f0000000000000000000f
f0f0000000000000000000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f0000000000000000000f0
0f000000f0000000f0000f0f0f0f000f0f000000f00000000000000000000000000000000000000000000000f000000f0f000f0f0f0f0000f0000000f000000f
f0f0000000000000000000f0f0f00000f000000000000000000000000000000000000000000000000000000000000000f00000f0f0f0000000000000000000f0
0f0000000000000000000f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000f0f0f0f0000000000000000000f
0000000000000000000000f0f0f000000000000000000000000000000000000000000000000000000000000000000000000000f0f0f000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0f000000000000000000000f0f00000f0f0000000000000000000000000000000000000000000000000000000000000f0f00000f0f000000000000000000000f
f0f0000000000000000000f0f0f000f0f0f00000000000000000000000000000000000000000000000000000000000f0f0f000f0f0f0000000000000000000f0
0f000000f0000000f000000f0f00000f0f000000f00000000000000000000000000000000000000000000000f000000f0f00000f0f000000f0000000f000000f
f0f0000000000000000000f0f0f000f0f0f00000000000000000000000000000000000000000000000000000000000f0f0f000f0f0f0000000000000000000f0
0f000000000000000000000f0f00000f0f0000000000000000000000000000000000000000000000000000000000000f0f00000f0f000000000000000000000f
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000f0f00000f0f0000000000000000000000000000000000000000000000000000000000000f0f00000f0f0000000000000000000000
f0000000f0000000000000f0f0f000f0f0f00000f00000000000000000000000000000000000000000000000f00000f0f0f000f0f0f0000000000000f0000000
0f00000f0f0000000000000f0f00000f0f00000f0f000000000000000000000000000000000000000000000f0f00000f0f00000f0f0000000000000f0f00000f

